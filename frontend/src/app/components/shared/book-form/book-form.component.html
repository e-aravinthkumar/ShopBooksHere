<form [formGroup]="bookForm" (ngSubmit)="onSubmit()" class="space-y-4">
      <div class="grid md:grid-cols-2 gap-2">
        <div>
          <label for="name" class="block mb-1 text-gray-700">Name</label>
          <input formControlName="name" id="name" type="text" class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500
            md:text-base text-sm"
            [class.error]="bookForm.get('name')?.invalid && (bookForm.get('name')?.dirty || bookForm.get('name')?.touched)">
          <div class="text-red-500 mt-1 text-sm px-2">
            <div
              *ngIf="bookForm.get('name')?.invalid && (bookForm.get('name')?.dirty || bookForm.get('name')?.touched)">
              <div *ngIf="bookForm.get('name')?.errors?.['required']">Name is required.</div>
            </div>
            <ng-container
              *ngIf="!bookForm.get('name')?.invalid || (bookForm.get('name')?.dirty && !bookForm.get('name')?.errors?.['required'])">
              &nbsp;
            </ng-container>
          </div>
        </div>
        <div>
          <label for="author" class="block mb-1 text-gray-700">Author</label>
          <input formControlName="author" id="author" type="text" class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500
            md:text-base text-sm"
            [class.error]="bookForm.get('author')?.invalid && (bookForm.get('author')?.dirty || bookForm.get('author')?.touched)">
          <div class="text-red-500 mt-1 text-sm px-2">
            <div
              *ngIf="bookForm.get('author')?.invalid && (bookForm.get('author')?.dirty || bookForm.get('author')?.touched)">
              <div *ngIf="bookForm.get('author')?.errors?.['required']">Author is required.</div>
            </div>
            <ng-container
              *ngIf="!bookForm.get('author')?.invalid || (bookForm.get('author')?.dirty && !bookForm.get('author')?.errors?.['required'])">
              &nbsp;
            </ng-container>
          </div>
        </div>

        <div>
          <label for="publisher" class="block mb-1 text-gray-700">Publisher</label>
          <input formControlName="publisher" id="publisher" type="text" class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500
            md:text-base text-sm"
            [class.error]="bookForm.get('publisher')?.invalid && (bookForm.get('publisher')?.dirty || bookForm.get('publisher')?.touched)">
          <div class="text-red-500 mt-1 text-sm px-2">
            <div
              *ngIf="bookForm.get('publisher')?.invalid && (bookForm.get('publisher')?.dirty || bookForm.get('publisher')?.touched)">
              <div *ngIf="bookForm.get('publisher')?.errors?.['required']">Publisher is required.</div>
            </div>
            <ng-container
              *ngIf="!bookForm.get('publisher')?.invalid || (bookForm.get('publisher')?.dirty && !bookForm.get('publisher')?.errors?.['required'])">
              &nbsp;
            </ng-container>
          </div>
        </div>
        <div>
          <label for="pages" class="block mb-1 text-gray-700">Pages</label>
          <input formControlName="pages" id="pages" type="number" class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500
            md:text-base text-sm"
            [class.error]="bookForm.get('pages')?.invalid && (bookForm.get('pages')?.dirty || bookForm.get('pages')?.touched)">
          <div class="text-red-500 mt-1 text-sm px-2">
            <div
              *ngIf="bookForm.get('pages')?.invalid && (bookForm.get('pages')?.dirty || bookForm.get('pages')?.touched)">
              <div *ngIf="bookForm.get('pages')?.errors?.['required']">Pages is required.</div>
            </div>
            <div
              *ngIf="!bookForm.get('pages')?.invalid || !(bookForm.get('pages')?.dirty || bookForm.get('pages')?.touched)">
              &nbsp;
            </div>
          </div>
        </div>

        <div>
          <label for="category" class="block mb-1 text-gray-700">Category</label>
          <input formControlName="category" id="category" type="text" class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500
            md:text-base text-sm"
            [class.error]="bookForm.get('category')?.invalid && (bookForm.get('category')?.dirty || bookForm.get('category')?.touched)">
          <div class="text-red-500 mt-1 text-sm px-2">
            <div
              *ngIf="bookForm.get('category')?.invalid && (bookForm.get('category')?.dirty || bookForm.get('category')?.touched)">
              <div *ngIf="bookForm.get('category')?.errors?.['required']">Category is required.</div>
            </div>
            <div
              *ngIf="!bookForm.get('category')?.invalid || !(bookForm.get('category')?.dirty || bookForm.get('category')?.touched)">
              &nbsp;
            </div>
          </div>
        </div>
        <div>
          <label for="price" class="block mb-1 text-gray-700">Price</label>
          <input formControlName="price" id="price" type="number" class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500
            md:text-base text-sm"
            [class.error]="bookForm.get('price')?.invalid && (bookForm.get('price')?.dirty || bookForm.get('price')?.touched)">
          <div class="text-red-500 mt-1 text-sm px-2">
            <div
              *ngIf="bookForm.get('price')?.invalid && (bookForm.get('price')?.dirty || bookForm.get('price')?.touched)">
              <div *ngIf="bookForm.get('price')?.errors?.['required']">Price is required.</div>
            </div>
            <div
              *ngIf="!bookForm.get('price')?.invalid || !(bookForm.get('price')?.dirty || bookForm.get('price')?.touched)">
              &nbsp;
            </div>
          </div>
        </div>

        <div>
          <label for="language" class="block mb-1 text-gray-700">Language</label>
          <input formControlName="language" id="language" type="text" class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500
            md:text-base text-sm"
            [class.error]="bookForm.get('language')?.invalid && (bookForm.get('language')?.dirty || bookForm.get('language')?.touched)">
          <div class="text-red-500 mt-1 text-sm px-2">
            <div
              *ngIf="bookForm.get('language')?.invalid && (bookForm.get('language')?.dirty || bookForm.get('language')?.touched)">
              <div *ngIf="bookForm.get('language')?.errors?.['required']">Language is required.</div>
            </div>
            <div
              *ngIf="!bookForm.get('language')?.invalid || !(bookForm.get('language')?.dirty || bookForm.get('language')?.touched)">
              &nbsp;
            </div>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 gap-4">
        <div>
          <label for="description" class="block mb-1 text-gray-700">Description</label>
          <textarea formControlName="description" id="description" class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500
            md:text-base text-sm" rows="3"
            [class.error]="bookForm.get('description')?.invalid && (bookForm.get('description')?.dirty || bookForm.get('description')?.touched)"></textarea>
          <div class="text-red-500 mt-1 text-sm px-2">
            <div
              *ngIf="bookForm.get('description')?.invalid && (bookForm.get('description')?.dirty || bookForm.get('description')?.touched)">
              <div *ngIf="bookForm.get('description')?.errors?.['required']">Description is required.</div>
            </div>
            <div
              *ngIf="!bookForm.get('description')?.invalid || !(bookForm.get('description')?.dirty || bookForm.get('description')?.touched)">
              &nbsp;
            </div>
          </div>
        </div>

        <div>
          <label for="imageUrls" class="block mb-1 text-gray-700">Image URLs (up to 4)</label>
          <div formArrayName="imageUrls" class="flex flex-col gap-2">
            <div *ngFor="let urlCtrl of imageUrls.controls; let i = index">
              <div class="flex items-center flex-wrap gap-2">
                <input [formControlName]="i" type="url" class="flex-grow p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500
                  md:text-base text-sm" [class.error]="urlCtrl.invalid && (urlCtrl.dirty || urlCtrl.touched)">
                <button type="button" [disabled]="i === 0"
                  [ngClass]="{'bg-red-200 hover:bg-red-300': i === 0, 'bg-red-500 hover:bg-red-600': i !== 0 }"
                  class="flex-none p-3 rounded-full focus:outline-none" (click)="removeImageUrl(i)">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                    class="h-5 w-5 text-white">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                    </path>
                  </svg>
                </button>
              </div>
              <div class="text-red-500 mt-1 text-sm px-2">
                <div *ngIf="urlCtrl.invalid && (urlCtrl.dirty || urlCtrl.touched)">
                  <div *ngIf="urlCtrl.hasError('required')">Image URL is required.</div>
                  <div *ngIf="urlCtrl.hasError('pattern')">Invalid URL format.</div>
                </div>
                <div *ngIf="!urlCtrl.invalid || !(urlCtrl.dirty || urlCtrl.touched)">
                  &nbsp;
                </div>
              </div>
            </div>
          </div>
          <button type="button"
            [ngClass]="{'bg-blue-500 hover:bg-blue-600': imageUrls.length <= 4, 'bg-blue-200 hover:bg-blue-300':imageUrls.length >= 4}"
            class="md:text-base text-sm mt-2 py-1 px-2 bg-blue-500 hover:bg-blue-600 rounded-xl text-white focus:outline-none inline-flex items-center gap-x-1"
            (click)="addImageUrl()" [disabled]="imageUrls.length >= 4">
            <span>
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </span>
            <span>
              Add Image URL
            </span>
          </button>
        </div>
      </div>

      <button type="submit" [disabled]="bookForm.invalid"
        [ngClass]="{'bg-green-500 hover:bg-green-600': !bookForm.invalid, 'bg-green-200 hover:bg-green-300':bookForm.invalid}"
        class="md:text-base text-sm mt-4 py-2 px-5 rounded-md text-white focus:outline-none">
        Save
      </button>
    </form>